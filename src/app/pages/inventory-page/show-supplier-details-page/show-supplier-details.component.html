<app-sidebar></app-sidebar>

<div class="container mb-3">
  <div class="header-container">
    <h1>Registro de Proveedores</h1>
    <h5>/Info. Proveedor</h5>
  </div>
  <h5>Proveedor {{ supplier.name }}</h5>

  <div class="table-responsive">
    <table class="table table-custom-primary">
      <thead>
      <tr>
        <th scope="col">ID</th>
        <th scope="col">Producto</th>
        <th scope="col">Costo</th>
        <th scope="col">Fecha de compra</th>
        <th colspan="2">Sucursales</th>
        <th scope="col">Total</th>
      </tr>
      <tr>
        <th></th>
        <th></th>
        <th></th>
        <th></th>
        <th>Sucursal</th>
        <th>Cantidad</th>
        <th></th>
      </tr>
      </thead>
      <tbody>
      <ng-container *ngFor="let order of orders; let i = index">
        <tr>
          <td >{{ i + 1 }}</td>
          <td>{{ order.productName }}</td>
          <td>{{ order.costPrice }}</td>
          <td>{{ order.purchaseDate }}</td>
          <td colspan="2"></td> <!-- Columnas para Sucursal y Cantidad -->
          <td>{{ calcularTotal(order) }}</td> <!-- Llamada a función para calcular el total -->
        </tr>
        <!-- Iterar sobre las sucursales y cantidades -->
        <ng-container *ngFor="let branchOrder of order.branchOrders">
          <tr>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td>{{ branchOrder.branchName }}</td>
            <td>{{ branchOrder.quantity }}</td>
            <td></td>
          </tr>
        </ng-container>
      </ng-container>
      </tbody>

    </table>
  </div>



  <div>
    <h6>Información General</h6>
    <div class="container edit-info">
      <div class="row">
        <div class="form-group col-md-3 mb-3">
          <label for="id">Id Proveedor</label>
          <input type="text" class="form-control" id="id" placeholder="Id Proveedor" [(ngModel)]="supplier.id" disabled>
        </div>
        <div class="form-group col-md-3 mb-3">
          <label for="name">Nombre</label>
          <input type="text" class="form-control" id="name" placeholder="Nombre" [(ngModel)]="supplier.name">
        </div>
      </div>
      <div class="row">
        <div class="form-group col-md-3 mb-3">
          <label for="supplierType">Tipo de proveedor</label>
          <select class="form-control" id="supplierType" [(ngModel)]="supplier.supplierType" required>
            <option value="1">Persona</option>
            <option value="2">Empresa</option>
            <option value="3">Organización</option>
            <option value="4">Fundación</option>
          </select>
        </div>
      </div>
    </div>
  </div>
  <div>
    <h6>Información Del Contacto</h6>
    <div class="container edit-info">
      <div class="row mb-3">
        <div class="form-group col-md-3">
          <label for="address">Dirección</label>
          <input type="text" class="form-control" id="address" [(ngModel)]="supplier.address" placeholder="Dirección">
        </div>
        <div class="form-group col-md-3">
          <label for="phone">Teléfono</label>
          <input type="text" class="form-control" id="phone" [(ngModel)]="supplier.phone" placeholder="Teléfono">
        </div>
      </div>
      <div class="row mb-3">
        <div class="form-group col-md-3">
          <label for="email">Correo electrónico</label>
          <input type="text" class="form-control" id="email" [(ngModel)]="supplier.email"
                 placeholder="Correo electrónico">
        </div>
        <div class="form-group col-md-3">
          <label for="urlPage">Url Página Web</label>
          <input type="text" class="form-control" id="urlPage" [(ngModel)]="supplier.urlPage"
                 placeholder="Url Página Web">
        </div>
      </div>
      <div class="row mb-3">
        <div class="form-group col-md-3">
          <label for="serviceType">Tipo de servicio</label>
          <input type="text" class="form-control" id="serviceType" [(ngModel)]="supplier.serviceType"
                 placeholder="Tipo de servicio">
        </div>
      </div>
    </div>
  </div>
  <button class="btn btn-primary mt-3" (click)="saveSupplierChanges()">Guardar cambios</button>
  <button class="btn btn-primary-border mt-3 mx-3" (click)="cancelChanges()">Cancelar cambios</button>
  <button class="btn btn-danger mt-3" (click)="deleteSupplier()">Eliminar Artículo</button>
</div>

